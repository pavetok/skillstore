Первый прототип

* intro
  У нас есть некоторый набор навыков
  У нас есть некоторый набор пользователей
  Пользователи хотят изучить навыки, которые им интересны
  Пользователи хотят обучить навыкам, которыми они владеют

  Иконки:
  ⇲  api-вызов
  ↴  параметры api-вызова
  ↔  рестарты
  ←  возвращаемые значения

* Посетитель может залогиниться как Пользователь
  ⇲  login
  ↴  email password
  ←  'ok user
  ←  'fail 'invalid-login

  Строго говоря в случае успеха мы должны возвращать sessid,
  из которого можно тривиально получить сущность user, но это детали.

  В дальнейшем мы пробрасываем состояние сессии в user чтобы
  логгировать действия и (в будущем) проверять права доступа.

  Для всех api-вызовов, куда пробрасывается user мы неявно
  предполагаем: ←  'fail 'invalid user

* Пользователь может просмотреть все навыки в системе
  ⇲  get-list-of-skills
  ↴  user
  ←  list<skill> Список навыков (или список хендлов навыков в реализации)

* TODO Просмотреть конкретные поля конкретного навыка (*todo* - тесты)
  ⇲  get-skill-details
  ↴  user skill list<field>
  ↴  user list<skill> list<field>
  ←  list<list<field:value>> Коллекция списков пар ключ:значение, где ключи - имена
  полей навыка, а значения - значения полей навыка.

* Пользователь может создать новый навык и добавить его в список существующих в системе навыков
  ⇲  make-skill
  ↴  user skill list<fields>
  ↔  duplicate stoplist mistakes
  ←  'ok skill
  ←  'fail 'restart-cancelled

* Пользователь, может добавить любой существующий навык к себе в "хочу научиться" или "могу научить"
  ⇲  add-skill-to-learn
  ↴  user skill
  ←  'ok
  ←  'fail 'skill-not-found

  ⇲  add-skill-to-teach
  ↴  user skill
  ←  'ok
  ←  'fail 'skill-not-found

* Пользователь может просматривать списки навыков, которые он добавил к себе в "хочу научиться" или "могу научить"
  ⇲  get-skill-to-learn
  ↴  user
  ←  'ok list<skill>

  ⇲  get-skill-to-teach
  ↴  user
  ←  'ok list<skill>

* Пользователь может запросить список пользователей, которые могут обучить конкретному навыку
  ⇲  get-teachers
  ↴  user skill
  ←  'ok list<user>
  ←  'fail 'skill-not-found

* Пользователь может запросить список пользователей, которые хотят изучить конкретный навык
  ⇲  get-learners
  ↴  user skill
  ← 'ok list<user>
  ←  'fail 'skill-not-found

* TestSuite:

** Проверка добавления навыков к себе
   ⇲  login, получаем user
   ⇲  get-list-of-skills, получаем список навыков
   Выбираем случайный навык, добавляем его в "хочу научиться":  ⇲  add-skill-to-learn
   Выбираем случайный навык, добавляем его в "могу научить":  ⇲ add-skill-to-teach
   Проверяем, что навыки добавились:  ⇲  get-skill-to-learn, ⇲  get-skill-to-teach

** Проверка создания навыков в системе
   Создаем новый навык ⇲  make-skill
   Получаем все навыки в системе ⇲  get-list-of-skills
   Проверяем, что нужный навык присутствует в списк
